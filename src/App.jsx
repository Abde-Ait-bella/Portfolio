import "./CSS/App.scss";
import { Routes, Route, NavLink } from "react-router-dom";
import Home from "./Home";
import Nav from "./Nav";
import Projects from "./Projects";
import { useEffect, useState } from "react";
import About from "./About";
import Contact from "./Contact";
import { motion, useAnimation } from "framer-motion";
import { Typewriter } from "react-simple-typewriter";
import { UseMode } from "./Context";


function App() {
  const [activePopup, setActivePopup] = useState(false);
  const [typewriter, setTypewriter] = useState(false);
  const [presentation, setPresentation] = useState(true);
  const {mode} = UseMode();

  const togglepPopup = () => {
    setActivePopup(!activePopup);
  };

  const draw = {
    hidden: { pathLength: 0, opacity: 0 },
    visible: (i) => {
      const delay = 1 + i;
      return {
        pathLength: 1,
        opacity: 1,
        transition: {
          pathLength: { delay, type: "spring", duration: 2 },
          opacity: { delay, duration: 0.1 },
        },
      };
    },
  };

  const controls = useAnimation(),
    controls_bella = useAnimation();

  useEffect(() => {
    const sequence = async () => {
      await controls.start("visible");

      setTimeout(() => {
        controls_bella.start("visible");
      }, 200);

      await controls.start({
        y: -100,
        scale: 0.4,
        transition: { type: "spring", duration: 2 },
      });

      setTimeout(() => {
        controls_bella.start({
          y: -235,
          scale: 0.4,
          transition: { type: "spring", duration: 2 },
        });
      }, 100);
    };

    setTimeout(async () => {
      await sequence();
      setTypewriter(true);
      setTimeout(() => {
        setPresentation(false);
      }, 10000);
    }, 2000);
  }, [controls]);

  return (
    <>
      <div 
          className={`popup-overlay ${activePopup ? "active" : ""}`}
          onClick={togglepPopup}
           ></div>
          <div className={`popup ${activePopup ? "active" : ""}`}>
            <div className="card">
              <div className="title">
                <div className="about">About</div>
                <div className="close" onClick={togglepPopup}>
                  <i class="fa-solid fa-xmark"></i>
                </div>
              </div>
              <h5>My Self Details</h5>
              <div className="text">
                I'm based in Taroudant, Morocco. I have a{" "}
                <span>specialized technician degree in full-stack</span> development
                from ISTA (Institut des Sciences et Techniques Appliquées). I'm
                passionate <span>junior front-end</span> developer with a keen
                interest in building user-friendly and visually appealing web
                applications..., <span>I love</span> <span>Laravel</span> and{" "}
                <span>React.js</span> as full-stack frameworks, MySQL for databases,
                and, of course, CSS.
              </div>
            </div>
          </div>
          {presentation ? (
            <motion.div className="presentation">
              <motion.svg
                width="1298"
                height="249"
                viewBox="0 0 1298 249"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                initial="hidden"
                animate={controls}
              >
                <motion.path
                  d="M118.7 247.212C120.211 229.84 122.345 212.605 123.355 195.168C126.284 144.599 130.353 84.6905 108.78 37.2788C102.864 24.2779 84.3041 -1.82554 66.3502 8.50925C44.0182 21.3642 44.8138 60.342 42.5409 82.2264C37.7414 128.44 33.9906 175.456 32.2389 221.877C32.0496 226.891 33.5835 233.723 31.4757 238.36C30.6971 240.073 31.7462 245.702 29.4153 245.839C24.9147 246.104 18.5343 246.892 14.3819 245.076C-2.25537 237.797 2.10307 196.002 4.23245 183.721C10.6324 146.81 44.917 146.939 75.0498 146.939C94.1294 146.939 113.168 148.312 132.207 148.312C149.076 148.312 161.34 132.5 172.729 121.451C197.437 97.4786 216.304 72.4826 214.7 37.2025C214.408 30.7805 214.342 21.5819 209.358 16.5983C205.025 12.2653 207.335 22.4152 207.527 23.619C218.801 94.3372 209.601 166.17 207.985 237.292C207.664 251.386 207.985 225.454 207.985 223.098C207.985 200.267 210.488 184.157 224.468 165.711C234.615 152.323 254.938 155.596 269.568 158.691C284.199 161.786 292.197 174.959 290.249 190.055C288.968 199.984 285.193 211.848 281.549 221.114C279.269 226.912 274.376 240.962 266.897 241.642C248.35 243.328 226.919 239.285 213.479 225.845C206.513 218.879 215.015 225.301 218.211 227.219C223.42 230.344 228.24 233.532 234.083 235.155C247.46 238.871 257.209 241.718 271.247 241.718C273.806 241.718 278.242 242.759 279.718 240.344C286.231 229.686 291.909 219.352 296.506 207.53C306.358 182.198 321.819 145.604 353.893 144.268C371.166 143.548 381.308 147.068 386.86 164.338C389.097 171.298 389.302 178.208 389.302 185.4C389.302 195.156 390.65 174.588 390.675 172.58C390.76 165.887 392.2 159.606 385.181 156.096C372.742 149.877 358.4 148.312 344.583 148.312C336.827 148.312 331.25 156.396 326.192 161.285C323.201 164.177 315.405 176.257 311.692 177.082C301.468 179.354 302.764 201.716 302.764 209.514C302.764 224.422 317.222 246.862 334.052 247.212C362.246 247.8 379.288 235.882 387.775 208.064C393.858 188.127 390.581 164.285 390.675 143.734C390.806 115.218 393.422 86.8176 393.422 58.2645C393.422 42.8362 392.049 28.0696 392.049 13.0116C392.049 10.6969 392.049 3.75249 392.049 6.06728C392.049 20.7191 392.049 35.371 392.049 50.0228C392.049 61.0626 392.049 72.1024 392.049 83.1421C392.049 99.3036 387.132 114.562 385.486 130.608C384.207 143.075 386.554 155.749 386.554 168.306C386.554 186.942 393.539 204.203 396.246 221.801C397.435 229.527 401.513 235.951 408.532 239.276C414.66 242.179 435.151 242.611 440.812 238.208C452.123 229.41 451.036 208.579 454.548 195.702C455.77 191.22 457.406 177.585 457.982 182.195C458.799 188.727 464.17 190.081 469.887 191.2C486.953 194.539 503.515 192.777 508.806 174.106C509.766 170.716 512.032 161.886 509.264 158.614C505.773 154.49 497.611 149.488 492.322 148.312C486.986 147.127 469.877 143.634 466.3 148.999C463.221 153.618 458.586 160.129 457.982 166.169C457.262 173.371 453.861 178.736 453.861 186.01C453.861 197.282 454.843 210.954 462.866 218.977C468.498 224.609 478.807 225.398 485.912 227.982C491.145 229.885 493.58 235.548 497.817 237.902C504.493 241.611 516.785 241.669 523.915 240.039C543.291 235.61 562.893 212.471 565.124 192.955C566.347 182.254 568.186 172.092 571.381 162.048C571.869 160.516 575.668 151.276 571.992 151.06C566.397 150.731 562.263 150.951 558.256 155.18C548.075 165.927 578.021 176.719 583.439 179.753C593.07 185.146 608.839 188.391 619.763 189.521C624.601 190.021 624.443 200.496 625.563 203.715C627.906 210.451 629.026 225.224 626.631 232.408C624.726 238.124 604.913 241.17 603.661 235.537C600.894 223.086 623.265 223.15 630.828 220.503C645.953 215.21 660.445 202.715 671.655 191.505C675.333 187.826 685.688 170.587 680.202 165.101C678.156 163.055 668.192 154.389 664.787 158.767C662.892 161.203 664.024 167.58 664.024 170.595C664.024 179.337 669.74 178.532 677.455 178.532C683.438 178.532 690.662 177.628 694.93 182.882C698.227 186.94 700.647 192.304 703.019 196.923C704.117 199.06 704.415 203.66 706.072 205.317C712.025 211.271 713.474 215.859 713.474 224.548C713.474 231.275 711.042 232.836 705.537 236.224C701.502 238.707 692.87 239.455 692.87 233.782C692.87 221.442 700.027 219.31 710.727 214.933C716.9 212.407 719.138 209.666 722.937 205.088C728.67 198.179 736.139 192.698 742.167 186.01C748.677 178.788 754.561 170.97 760.787 163.498C769.928 152.529 762.148 166.965 760.482 171.359C758.302 177.106 759.814 183.804 757.735 189.521C755.637 195.289 755.42 214.537 760.94 219.053C765.855 223.075 772.722 222.082 777.728 225.235C780.43 226.936 782.647 229.154 786.275 229.355C794.316 229.802 802.358 230.729 810.695 230.729C817.759 230.729 825.418 240.244 832.978 235.384C840.212 230.733 842.991 219.721 845.646 212.262C848.482 204.295 853.055 194.854 852.132 186.087C850.469 170.288 828.548 157.097 814.816 154.112C802.681 151.474 790.506 147.133 778.034 151.06C772.861 152.688 770.246 153.093 767.655 157.165C766.141 159.544 762.861 163.379 767.35 160.522C780.062 152.433 796.621 153.807 811.077 153.807C822.052 153.807 833.368 153.735 841.22 162.048C843.396 164.353 841.183 168.613 843.28 170.29C845.623 172.164 847.918 172.729 848.088 175.785C848.657 186.03 849.461 155.292 849.461 145.031C849.461 126.82 852.209 181.383 852.209 199.594C852.209 204.71 849.497 218.494 852.514 222.182C856.585 227.158 856.91 231.468 861.519 235.155C866.33 239.005 872.571 240.344 878.918 240.344C895.762 240.344 897.984 219.927 901.048 206.309C903.031 197.496 904.061 188.526 907.077 179.982C909.711 172.517 906.842 164.508 909.29 157.165C911.818 149.579 910.819 142.818 920.202 142.818C923.405 142.818 926.031 140.571 929.436 141.75C934.116 143.369 936.115 152.479 937.067 156.859C941.705 178.194 940.12 201.378 940.12 223.174C940.12 228.445 941.493 232.952 941.493 238.284C941.493 246.28 942.977 224.708 943.172 222.793C944.39 210.861 950.579 200.219 952.177 188.452C953.637 177.699 956.567 167.298 957.9 156.63C959.316 145.302 965.88 146.939 976.139 146.939C984.991 146.939 982.013 168.116 983.007 174.411C985.308 188.985 986.822 202.29 986.822 216.993C986.822 222.945 986.822 228.898 986.822 234.85C986.822 242.668 988.196 236.945 988.196 231.187C988.196 214.653 988.196 198.119 988.196 181.584C988.196 172.541 986.444 161.359 988.807 152.433C992.711 137.685 1002.44 134.576 1015.67 134.576C1025.16 134.576 1021.14 137.197 1026.05 143.505C1030.14 148.77 1029.8 160.494 1030.47 166.932C1031.31 174.969 1030.78 183.299 1030.78 191.352C1030.78 203.766 1030.78 216.179 1030.78 228.592C1030.78 238.104 1037.43 234.035 1043.75 236.91C1061.82 245.121 1058.25 202.488 1058.25 194.863C1058.25 186.65 1059.62 178.928 1059.62 170.595C1059.62 158.841 1057.16 194.526 1060.31 205.851C1062.18 212.578 1068.07 221.774 1074.12 225.235C1083.13 230.383 1096.48 240.836 1106.33 229.661C1115.19 219.601 1117.97 211.958 1121.36 198.602C1125.9 180.719 1129.03 167.121 1120.06 149.839C1113.86 137.899 1106.15 128.576 1093.35 123.816C1085.25 120.803 1069.4 121.325 1063.21 128.471C1053.57 139.594 1058.04 160.658 1059.55 174.258C1060.32 181.17 1059.38 178.609 1059.93 172.122C1060.92 160.525 1059.5 144.488 1067.56 134.882C1070.68 131.157 1070.36 129.082 1075.57 129.082C1080.33 129.082 1085.09 129.082 1089.84 129.082C1094.31 129.082 1096.91 129.106 1100.83 131.066C1105.45 133.373 1109.35 132.604 1114.49 133.889C1118.44 134.877 1122.86 134.816 1126.93 134.576C1129.13 134.447 1129.34 124.915 1129.6 122.977C1130.7 114.732 1127.97 124.173 1127.24 127.098C1125.14 135.484 1127.81 144.621 1125.56 153.196C1121.51 168.61 1124.18 187.358 1124.18 203.333C1124.18 217.229 1127.4 229.562 1141.43 234.239C1165.51 242.266 1193.08 222.96 1200.34 200.128C1204.43 187.291 1206.28 173.853 1210.42 160.98C1212.18 155.489 1208.45 149.115 1208.05 143.657C1207.88 141.342 1209.57 130.865 1207.67 129.387C1206.01 128.096 1201.88 150.357 1201.72 151.365C1199.91 162.42 1199.73 173.32 1199.73 184.484C1199.73 203.629 1206.82 225.085 1228.58 228.745C1261.86 234.344 1290.66 217.249 1295.12 183.492C1295.91 177.537 1296.13 171.411 1295.89 165.406C1295.6 158.431 1289.63 155.064 1284.9 150.754C1272.66 139.61 1260.05 120.795 1242.31 118.398C1222.4 115.707 1210.3 122.067 1204.62 140.758C1203.09 145.771 1200.09 150.148 1203.4 142.513C1205.35 138.002 1210.29 129.645 1214.92 127.098C1226.85 120.536 1237.64 119.39 1249.49 124.656C1258.95 128.861 1261.3 147.563 1261.54 156.554C1261.65 160.433 1261.76 167.458 1263.07 171.053C1263.58 172.452 1265.67 176.902 1265.67 173.19C1265.67 156.478 1265.67 139.765 1265.67 123.053C1265.67 109.298 1264.99 95.3301 1266.28 81.6159C1267.27 71.0666 1269.98 60.74 1270.85 50.1755C1271.61 40.978 1271.86 32.9529 1267.73 24.6873C1264.82 18.8846 1264.66 13.1215 1264.29 6.83039C1262.83 -17.9577 1263.02 56.4799 1262.92 81.3107C1262.78 116.495 1261.72 151.621 1258.87 186.697C1258.05 196.88 1256.05 207.427 1256.05 217.68C1256.05 223.499 1260.56 227.34 1263.61 232.026C1268.66 239.808 1275.29 238.971 1283.52 238.971"
                  stroke="white"
                  strokeWidth="5"
                  strokeLinecap="round"
                  variants={draw}
                />
              </motion.svg>

              <motion.svg
                width="795"
                height="230"
                viewBox="0 0 795 230"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                initial="hidden"
                animate={controls_bella}
              >
                <motion.path
                  d="M125 228C125.381 205.547 125.536 183.151 123.056 160.778C120.931 141.615 118.708 129.653 113.778 111.167C110.058 97.219 105.564 80.8627 96.6667 69C92.7545 63.7838 80.8062 53.1943 73.1667 54.7222C63.4267 56.6702 60.1423 80.2726 58.7778 86.7778C51.9646 119.258 49.2355 152.448 42.7778 185C41.7464 190.199 40.959 201.067 36.7778 205.667C30.1538 212.953 26.2889 219.47 16.0556 221.389C-2.87465 224.938 0.977996 190.387 4.16667 180.167C11.3319 157.201 46.8182 152.048 66.8889 155.444C79.7619 157.623 90.7874 164.961 102.667 169.889C110.054 172.954 117.718 175.507 125.056 171C134.233 165.362 144.598 153.483 145 142.222C145.087 139.778 147 133.193 147 140.222C147 149.321 145.771 159.293 147.333 168.278C148.963 177.65 155.359 188.612 160.778 196.222C167.297 205.377 181.7 215.673 193.556 212.278C206 208.714 214.332 199.648 221.944 189.556C238.637 167.424 246.712 142.163 250.444 115C253.475 92.9415 254.169 68.9658 251.944 46.7222C251.444 41.7201 250 36.5455 250 31.5C250 7.21305 249.201 80.0761 248 104.333C246.617 132.264 243.265 155.585 253.556 182C255.258 186.369 257.179 193.156 260.5 196.833C267.429 204.505 279.099 209.878 288.778 212.778C305.418 217.764 315.09 207.583 322.889 193.556C340.685 161.549 344.52 123.703 348.278 87.9444C350.14 70.2242 352.116 52.1574 350.333 34.3333C350.266 33.6592 348.007 20.5325 347.389 22.1111C341.379 37.4691 340.008 56.7239 340.167 72.9444C340.445 101.363 340.868 130.434 343.611 158.778C345.031 173.453 346.675 189.045 353.222 202.444C354.985 206.053 357.01 209.714 357.889 213.667C358.037 214.333 352.79 203.816 352.333 202.778C345.664 187.615 335.015 157.703 351.111 144.111C358.418 137.941 370.137 137.222 379.222 137.222C388.67 137.222 394.478 139.882 399.778 147.778C409.566 162.36 411.699 184.478 400.222 198.778C391.119 210.119 375.366 220.429 360.389 214.278C357.088 212.922 354.466 210.094 352.444 207.222C351.062 205.257 355.677 208.446 355.944 208.556C372.426 215.342 395.851 216.335 413.111 212.5C424.478 209.974 436.709 203.428 445.333 195.556C455.353 186.41 458.317 171.696 459.778 158.778C460.287 154.276 459.718 156.078 460.167 159.222C460.779 163.512 462.852 168.293 465.444 171.778C477.645 188.178 505.531 183.285 512.556 164.944C518.402 149.678 513.064 140.542 497.333 137.556C488.251 135.831 472.125 130.174 467.333 140.778C463.466 149.336 459.686 157.89 461.667 167.333C463.779 177.405 468.147 187.098 472.333 196.444C473.632 199.344 475.745 206.624 479.333 208C489.472 211.886 502.996 216.854 514 215.778C521.81 215.014 528.55 210.888 535.111 207C539.944 204.136 545.502 202.174 550 198.778C562.74 189.158 569.749 170.262 574.611 156C586.668 120.633 588.167 83.3536 588.778 46.3333C588.832 43.0685 592.345 14.063 584.778 13.2222C573.975 12.0219 559.883 24.1235 555.056 32.8889C539.331 61.4417 551.091 95.681 559.778 124.333C565.241 142.352 571.256 160.183 577 178.111C578.25 182.013 578.851 186.156 581.444 189.444C585.998 195.217 596.848 203.837 604.667 204C612.275 204.158 621.13 204.135 628.444 201.778C636.085 199.316 640.403 193.717 644.611 187.111C658.836 164.781 674.742 139.469 680.778 113.444C686.7 87.9094 686.397 58.3667 681.333 32.6667C679.197 21.8243 674.685 8.49773 664.111 3.05554C652.575 -2.88239 644.633 14.7113 641 22.4444C625.208 56.0572 623.169 93.251 624.889 129.778C626.142 156.396 626.607 191.002 641.833 214.222C646.595 221.483 652.789 223 660.889 223C668.682 223 676.196 222.532 682.556 217.556C690.101 211.651 698.068 203.631 703.833 195.944C709.074 188.957 712 181.24 712 172.556C712 168.611 712 156.778 712 160.722C712 173.579 708.275 189.056 712.222 201.556C718.145 220.312 740.72 215.918 751 203.889C757.854 195.868 771.354 175.929 760.556 166.222C751.558 158.134 733.926 155.295 722.222 157.444C719.674 157.913 714.214 159.239 712.889 161.889C712.074 163.52 721.416 162.277 722.111 162.222C727.752 161.78 733.384 162.28 739 161.5C746.789 160.418 759.327 162.125 760.944 151.611C761.738 146.45 762 150.811 762 153.944C762 160.926 762 167.907 762 174.889C762 181.953 762.645 188.644 766 195C768.28 199.32 772.954 201.08 776.5 204C781.759 208.331 787.071 211.036 793 214"
                  stroke="white"
                  strokeWidth="5"
                  strokeLinecap="round"
                  variants={draw}
                />
                <motion.path
                  d="M225 64C231.651 65.6628 237.288 68.3416 244.333 69C254.747 69.9732 268.545 72.1891 278.778 69.1111C285.511 67.0857 292.967 59.0329 298 54"
                  stroke="white"
                  strokeWidth="5"
                  strokeLinecap="round"
                  variants={draw}
                />

                <motion.path
                  d="M144 122C144.384 125.454 156.535 129.708 158.444 125.889C159.847 123.083 160.658 111.245 156 111C153.82 110.885 145.702 107.998 145.056 111.556C144.288 115.778 144 119.615 144 124"
                  stroke="white"
                  stroke-width="5"
                  stroke-linecap="round"
                  variants={draw}
                />
              </motion.svg>
              <div className="container Typewriter">
                {typewriter ? (
                  <span>
                    <Typewriter
                      words={[
                        '" Welcome! I chose to replicate YouTube’s design in this portfolio to show I can recreate any platform with precision."',
                      ]}
                      cursor
                      pauseFor={5000}
                      // cursorStyle="_"
                      typeSpeed={70}
                      // deleteSpeed={50}
                      delaySpeed={1000}
                    />
                  </span>
                ) : (
                  ""
                )}
              </div>
            </motion.div>
          ) : (
            ""
          )}

          <Nav />
         
          <div className="app"  theme-toggle-mode={mode}>
            <div className="container">
              <div className="app-bg-img">
                <video
                  src="/assets/videos/background-video.m4v"
                  type="video/mp4"
                  autoPlay
                  loop
                  muted
                ></video>
              </div>
              <div className="app-profile">
                <div className="app-profile-info">
                  <div className="profile-img">
                    <img src="./assets/images/profile.jpg" alt="" />
                  </div>
                  <div className="profile-info">
                    <h3 dir="rtl">عبد الصمد أيت بلا | AbdeSsamad Ait-bella</h3>
                    <label>@full-stack • 35 years old • 3 projects</label>
                    <br />
                    <label>
                      More about me <span onClick={togglepPopup}>...more</span>
                    </label>

                    <div className="check-cv">
                      <a href="../assets/files/cv.pdf" target="_blank">
                        Check my CV
                        <i class="fa-solid fa-eye"></i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div className="app-menu container">
              <div>
                <NavLink to={"/"}>Home</NavLink>
              </div>
              <div>
                <NavLink to={"/projects"}>Projects</NavLink>
              </div>
              <div>
                <NavLink to={"/about-me"}>About me</NavLink>
              </div>
              <div>
                <NavLink to={"/contact"}>Contact me</NavLink>
              </div>
            </div>
            <hr />
            <div className="container show-menu">
              <Routes>
                <Route path="/" element={<Home />} />
                <Route path="/projects" element={<Projects />} />
                <Route path="/about-me" element={<About />} />
                <Route path="/project" element={<Home />} />
                <Route path="/contact" element={<Contact />} />
              </Routes>
            </div>
          </div>
    </>
  );
}

export default App;
